{"version":3,"file":"commonHelpers.js","sources":["../src/js/homeCatRender.js","../src/js/homeRender.js","../src/js/modalburger.js","../src/js/categories.js","../src/main.js"],"sourcesContent":["import { fetchSelectedCategory } from \"./fetchAPI\";\nimport { seeMoreBtn, categoriesList, loadHomeBooks } from \"./homeRender\";\nimport iziToast from \"izitoast\";\nlet listForRender;\nconst sectionTitle = document.querySelector(\".main-category-title\");\n\nexport function LoadHomeCategory(data) {\n    const categoryTitle = data;\n    console.log(data);\n    fetchSelectedCategory(categoryTitle)\n    .then((category) => {\n        if(Object.keys(category.data).length !== 0 ){\n            categoriesList.innerHTML = \"\";\n            renderCategoryBooks(category.data, categoryTitle);\n        }\n        else {\n            categoriesList.innerHTML = \"\";\n            iziToast.error({\n                message: \"Sorry, there are no books to render\",\n                position: `topRight`,\n            });\n        }\n    })\n    .catch((error) =>{\n        console.log('Error loading data:', error)\n        iziToast.info({\n            message: \"Sorry, there are no books to render\",\n            position: `topRight`,\n            timeout: 3000,\n            progressBar: false,\n            title: 'Error',\n            // ...optionsIziToastError\n        });\n    })\n}\nfunction renderCategoryBooks(category, listName){\n    categoriesList.insertAdjacentHTML(\"afterbegin\", `<ul class=\"category-books-list\"></ul>`);\n    listForRender = document.querySelector(\".category-books-list\");\n    const markupCategoryBooks = category\n    .map((book) => {\n        return `\n        <li class=\"home-books-item\" id=\"${book._id}\">\n        <div class=\"image-overlay\">\n            <img class=\"book-image\" src=\"${book.book_image}\" alt=\"${book.title}\">\n            <p class=\"image-overlay-text\">QUICK VIEW</p>\n        </div>\n            <div class=\"book-info\">\n                <p class=\"book-title break-text\">${book.title}</p>\n                <p class=\"book-author\">${book.author}</p>\n            </div>\n        </li>`\n    })\n    .join(\"\");\n    listForRender.insertAdjacentHTML(\"beforeend\", markupCategoryBooks);\n    listForRender.insertAdjacentHTML(\"afterend\", `<div class=\"all-cat-btn-wrap\"><button class=\"all-cat-btn\">All Categories</button></div>`)\n    let allCatBtn = document.querySelector(\".all-cat-btn\");\n    listenAllCatBtn(allCatBtn);\n    const titleArr = listName.split(\" \")\n    if(titleArr.length > 3){\n        const middleWord = titleArr[Math.round((titleArr.length - 1) / 2)]\n        let forTitle = listName.split(middleWord).join(\" \");\n        forTitle = forTitle.replace(titleArr[titleArr.length-1], `<span class=\"main-category-title-span\">${titleArr[titleArr.length-1]}</span>`)\n        sectionTitle.innerHTML = forTitle\n    }\n    else{\n        listName = listName.replace(titleArr[titleArr.length-1], `<span class=\"main-category-title-span\">${titleArr[titleArr.length-1]}</span>`)\n        sectionTitle.innerHTML = listName\n    }\n}\nexport function listenAllCatBtn (allCatBtn){\n    allCatBtn.addEventListener(\"click\", () => {\n        loadHomeBooks()\n        baseHomeTitle()\n    });\n}\nexport function baseHomeTitle(){\n    sectionTitle.innerHTML = `Best Sellers <span class=\"main-category-title-span\">Books</span>`;\n}\n\n","import {fetchTopBooks} from \"./fetchAPI\";\nimport { LoadHomeCategory } from \"./homeCatRender\";\nimport iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\nexport {seeMoreBtn, categoriesList};\nconst categoriesList = document.querySelector(\".home-categories-list\");\nlet seeMoreBtn;\n\n//  loader\nconst loader = document.querySelector('.loader');\n\nwindow.addEventListener('load', () => {\n    loader.style.display = 'none';\n});\n\n//  loader\n\nconst toastOptions = {\n    titleColor: '#fff',\n    titleSize: '16px',\n    titleLineHeight: '1.5',\n    messageColor: '#fff',\n    messageSize: '16px',\n    messageLineHeight: '1.5',\n    position: 'topRight',\n    timeout: 3000,\n    progressBar: false\n};\n\nconst optionsIziToastWarning = {\n    ...toastOptions,\n    message: 'none',\n    backgroundColor: '#FFA000'\n};\n\nconst optionsIziToastError = {\n    ...toastOptions,\n    backgroundColor: '#EF4040',\n    maxWidth: 400\n    \n};\n\nexport function loadHomeBooks() {\n    fetchTopBooks()\n    .then((categories) =>{\n        if(Object.keys(categories.data).length !== 0 ){\n            categoriesList.innerHTML = \"\";\n            renderHomeCategories(categories.data);\n\n        }\n        else {\n            categoriesList.innerHTML = \"\";\n            iziToast.error({\n                message: \"Sorry, there are no books to render\",\n                position: `topRight`,\n            });\n        }\n    })\n    .catch((error) =>{\n        console.log('Error loading data:', error)\n        iziToast.info({\n            message: \"Sorry, there are no books to render\",\n            position: `topRight`,\n            timeout: 3000,\n            progressBar: false,\n            title: 'Error',\n            ...optionsIziToastError\n        });\n    })\n;}\nfunction renderHomeCategories(categories){\n    const markupCategories = categories\n    .map((category) =>{\n        return `\n        <li class=\"home-categories-item\">\n        <h3 class=\"home-category-title\">${category.list_name}</h3>\n        <ul class=\"home-books-list\">${renderHomeBooks(category.books)}</ul>\n        <div class=\"see-more-wrapper\">\n            <button class=\"button see-more\" data-js=\"${category.list_name}\">See more</button>\n        </div>\n        </li>`\n    })\n    .join(\"\");\n    categoriesList.insertAdjacentHTML(\"beforeend\", markupCategories);\n    seeMoreBtn = document.querySelectorAll(\".see-more\");\n    seeMoreListener();\n}\nfunction renderHomeBooks(books){\n    return books.map((book) => {\n        return `\n        <li class=\"home-books-item\" id=\"${book._id}\">\n            <div class=\"image-overlay\">\n                <img class=\"book-image\" src=\"${book.book_image}\" alt=\"${book.title}\">\n                <p class=\"image-overlay-text\">QUICK VIEW</p>\n            </div>\n            <div class=\"book-info\">\n                <p class=\"book-title break-text\">${book.title}</p>\n                <p class=\"book-author\">${book.author}</p>\n            </div>\n        </li>`\n    })\n    .join(\"\");\n}\nfunction seeMoreListener(){\nfor (let btns of seeMoreBtn){\n    btns.addEventListener(\"click\",() => LoadHomeCategory(btns.getAttribute(\"data-js\")));\n}\n}\n\n\n\n\n","import { refs } from './refs';\n\nexport function toggleModal() {\n  if (refs.modal.style.display === 'block') {\n    refs.modal.style.display = 'none';\n    refs.modalImage.setAttribute(\n      'href',\n      './img/noptimizesprite.svg#icon-align-left'\n    );\n  } else {\n    refs.modal.style.display = 'block';\n    refs.modalImage.setAttribute(\n      'href',\n      './img/noptimizesprite.svg#icon-x-close'\n    );\n  }\n}\n\n// 1) В файлі style.css розкоментуй 22-й рядок (@import url(./modalburger.css);)\n\n// 2) В файлі index.html розкоментуй 31-й рядок (<load src=\"partials/modalburger.html\" />)\n\n// 3) Це треба додати в файл refs.js - burgerBtn: document.querySelector('#icon-align-left'),\n// burgerCont: document.querySelector('.backdrop'),\n// body: document.querySelector('body'),\n// modal: document.querySelector('.burg-cont'),\n// modalImage: document.querySelector('#modal-burger-btn'),\n\n// 4) В файлі main.js розкоментуй 15-й рядок (import { toggleModal } from './js/modalburger.js';)\n\n// 5) Це треба додати в файл main.js (refs.burgerBtn.addEventListener('click', () => {\n// refs.burgerCont.classList.toggle('is-open');\n// refs.body.classList.toggle('modal-open');\n// toggleModal();\n// });)\n","import { refs } from './refs';\nimport { LoadHomeCategory } from '/js/homeCatRender.js';\nimport { loadHomeBooks } from './homeRender';\nimport { baseHomeTitle } from './homeCatRender';\n\nrefs.categoriesRef.addEventListener('click', categoriesSelected);\n\nexport function categoriesSelected(event) {\n  if (\n    !event ||\n    !event.target ||\n    !event.target.classList.contains('categories__item')\n  ) {\n    return;\n  }\n\n  const selectedCategory = event.target;\n\n  if (selectedCategory.dataset.category === 'all categories') {\n    const allCategories = Array.from(selectedCategory.parentElement.children);\n\n    allCategories.forEach(category => {\n      category.classList.remove('selected');\n    });\n\n    selectedCategory.classList.add('selected');\n\n    loadHomeBooks();\n    baseHomeTitle();\n  } else {\n    const allCategories = Array.from(selectedCategory.parentElement.children);\n\n    allCategories.forEach(category => {\n      category.classList.remove('selected');\n    });\n\n    selectedCategory.classList.add('selected');\n\n    LoadHomeCategory(selectedCategory.dataset.category);\n  }\n}\n","import './js/support';\n/*LIBRARIES\n1. Axios\n(docs) - https://www.npmjs.com/package/axios?activeTab=readme\n2.izitoast\n(docs) - https://www.npmjs.com/package/izitoast\n3.tui-pagination\n(docs) - https://www.npmjs.com/package/tui-pagination\n4.Swiper \n(docs) - https://www.npmjs.com/package/swiper\n*/\nimport { loadHomeBooks } from './js/homeRender';\nloadHomeBooks();\n\nimport { toggleModal } from './js/modalburger.js';\n\nrefs.burgerBtn.addEventListener('click', () => {\nrefs.burgerCont.classList.toggle('is-open');\nrefs.body.classList.toggle('modal-open');\ntoggleModal();\n});\n\nif (localStorage.getItem('theme') === 'dark') {\n  refs.themeCheckbox.checked = true;\n  // Сюди треба навішати класи для темної теми або функцію яка це робитиме\n  document.body.classList.add('dark-theme');\n}\n/*-------------------CATEGORIES----------------------*/ \nimport { categoriesSelected } from './js/categories';\ncategoriesSelected();\n\nimport { refs } from './js/refs.js';\nimport { onAddThemeLocalStorage } from './js/localStorage.js';\nrefs.themeCheckbox.addEventListener('change', onAddThemeLocalStorage);\n\nimport { onBookClick, bookListRef } from './js/modalWindowFunctions.js';\nbookListRef.addEventListener('click', onBookClick);\n\n/*-----------------------SCROLL UP ----------------*/\nwindow.addEventListener('scroll', () => {\n  if (window.scrollY > 100) {\n    refs.upButton.style.display = 'block';\n  } else {\n     refs.upButton.style.display = 'none';\n  }\n});\n\n\nrefs.upButton.addEventListener('click', () => {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n});\n\n\n\nrefs.burgerBtn.addEventListener(\"click\", () => {\n  burgerCont.classList.toggle(\"is-open\")\n  body.classList.toggle(\"modal-open\")\n  toggleModal()\n});\n\n"],"names":["listForRender","sectionTitle","LoadHomeCategory","data","categoryTitle","fetchSelectedCategory","category","categoriesList","renderCategoryBooks","iziToast","error","listName","markupCategoryBooks","book","allCatBtn","listenAllCatBtn","titleArr","middleWord","forTitle","loadHomeBooks","baseHomeTitle","seeMoreBtn","loader","toastOptions","optionsIziToastError","fetchTopBooks","categories","renderHomeCategories","markupCategories","renderHomeBooks","seeMoreListener","books","btns","toggleModal","refs","categoriesSelected","event","selectedCategory","onAddThemeLocalStorage","bookListRef","onBookClick"],"mappings":"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"}