{"version":3,"file":"commonHelpers.js","sources":["../src/js/homeCatRender.js","../src/js/homeRender.js","../src/js/categories.js","../src/main.js"],"sourcesContent":["import { fetchSelectedCategory } from './fetchAPI';\nimport { seeMoreBtn, categoriesList, loadHomeBooks } from './homeRender';\nimport iziToast from 'izitoast';\nlet listForRender;\nconst sectionTitle = document.querySelector('.main-category-title');\n\nexport function LoadHomeCategory(data) {\n  const categoryTitle = data;\n  console.log(data);\n  fetchSelectedCategory(categoryTitle)\n    .then(category => {\n      if (Object.keys(category.data).length !== 0) {\n        categoriesList.innerHTML = '';\n        renderCategoryBooks(category.data, categoryTitle);\n      } else {\n        categoriesList.innerHTML = '';\n        iziToast.error({\n          message: 'Sorry, there are no books to render',\n          position: `topRight`,\n        });\n      }\n    })\n    .catch(error => {\n      console.log('Error loading data:', error);\n      iziToast.info({\n        message: 'Sorry, there are no books to render',\n        position: `topRight`,\n        timeout: 3000,\n        progressBar: false,\n        title: 'Error',\n        // ...optionsIziToastError\n      });\n    });\n}\nfunction renderCategoryBooks(category, listName) {\n  categoriesList.insertAdjacentHTML(\n    'afterbegin',\n    `<ul class=\"category-books-list\"></ul>`\n  );\n  listForRender = document.querySelector('.category-books-list');\n  const markupCategoryBooks = category\n    .map(book => {\n      return `\n        <li class=\"home-books-item\" id=\"${book._id}\">\n        <div class=\"image-overlay\">\n            <img class=\"book-image\" src=\"${book.book_image}\" alt=\"${book.title}\">\n            <p class=\"image-overlay-text\">QUICK VIEW</p>\n        </div>\n            <div class=\"book-info\">\n                <p class=\"book-title break-text\">${book.title}</p>\n                <p class=\"book-author\">${book.author}</p>\n            </div>\n        </li>`;\n    })\n    .join('');\n  listForRender.insertAdjacentHTML('beforeend', markupCategoryBooks);\n  listForRender.insertAdjacentHTML(\n    'afterend',\n    `<div class=\"all-cat-btn-wrap\"><button class=\"all-cat-btn\">All Categories</button></div>`\n  );\n  let allCatBtn = document.querySelector('.all-cat-btn');\n  allCatBtn.addEventListener('click', function () {\n    const currentSelected = document.querySelector(\n      '.categories__item.selected'\n    );\n    if (currentSelected) {\n      currentSelected.classList.remove('selected');\n    }\n    const allCategories = document.querySelector(\n      '[data-category=\"all categories\"]'\n    );\n    allCategories.classList.add('selected');\n  });\n  listenAllCatBtn(allCatBtn);\n  const titleArr = listName.split(' ');\n  if (titleArr.length > 3) {\n    const middleWord = titleArr[Math.round((titleArr.length - 1) / 2)];\n    let forTitle = listName.split(middleWord).join(' ');\n    forTitle = forTitle.replace(\n      titleArr[titleArr.length - 1],\n      `<span class=\"main-category-title-span\">${\n        titleArr[titleArr.length - 1]\n      }</span>`\n    );\n    sectionTitle.innerHTML = forTitle;\n  } else {\n    listName = listName.replace(\n      titleArr[titleArr.length - 1],\n      `<span class=\"main-category-title-span\">${\n        titleArr[titleArr.length - 1]\n      }</span>`\n    );\n    sectionTitle.innerHTML = listName;\n  }\n}\nexport function listenAllCatBtn(allCatBtn) {\n  allCatBtn.addEventListener('click', () => {\n    loadHomeBooks();\n    baseHomeTitle();\n  });\n}\nexport function baseHomeTitle() {\n  sectionTitle.innerHTML = `Best Sellers <span class=\"main-category-title-span\">Books</span>`;\n}\n","import { fetchTopBooks } from './fetchAPI';\nimport { LoadHomeCategory } from './homeCatRender';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nexport { seeMoreBtn, categoriesList };\nconst categoriesList = document.querySelector('.home-categories-list');\nlet seeMoreBtn;\n\n//  loader\nconst loader = document.querySelector('.loader');\n\nwindow.addEventListener('load', () => {\n  loader.style.display = 'none';\n});\n\n//  loader\n\nconst toastOptions = {\n  titleColor: '#fff',\n  titleSize: '16px',\n  titleLineHeight: '1.5',\n  messageColor: '#fff',\n  messageSize: '16px',\n  messageLineHeight: '1.5',\n  position: 'topRight',\n  timeout: 3000,\n  progressBar: false,\n};\n\nconst optionsIziToastWarning = {\n  ...toastOptions,\n  message: 'none',\n  backgroundColor: '#FFA000',\n};\n\nconst optionsIziToastError = {\n  ...toastOptions,\n  backgroundColor: '#EF4040',\n  maxWidth: 400,\n};\n\nexport function loadHomeBooks() {\n  fetchTopBooks()\n    .then(categories => {\n      if (Object.keys(categories.data).length !== 0) {\n        categoriesList.innerHTML = '';\n        renderHomeCategories(categories.data);\n      } else {\n        categoriesList.innerHTML = '';\n        iziToast.error({\n          message: 'Sorry, there are no books to render',\n          position: `topRight`,\n        });\n      }\n    })\n    .catch(error => {\n      console.log('Error loading data:', error);\n      iziToast.info({\n        message: 'Sorry, there are no books to render',\n        position: `topRight`,\n        timeout: 3000,\n        progressBar: false,\n        title: 'Error',\n        ...optionsIziToastError,\n      });\n    });\n}\nfunction renderHomeCategories(categories) {\n  const markupCategories = categories\n    .map(category => {\n      return `\n        <li class=\"home-categories-item\">\n        <h3 class=\"home-category-title\">${category.list_name}</h3>\n        <ul class=\"home-books-list\">${renderHomeBooks(category.books)}</ul>\n        <div class=\"see-more-wrapper\">\n            <button class=\"button see-more\" data-js=\"${\n              category.list_name\n            }\">See more</button>\n        </div>\n        </li>`;\n    })\n    .join('');\n  categoriesList.insertAdjacentHTML('beforeend', markupCategories);\n  seeMoreBtn = document.querySelectorAll('.see-more');\n  seeMoreBtn.forEach(button => {\n    button.addEventListener('click', () => {\n      const category = button.dataset.js;\n      const categoryElement = document.querySelector(\n        `.categories__item[data-category=\"${category}\"]`\n      );\n      if (categoryElement) {\n        document\n          .querySelectorAll('.categories__item.selected')\n          .forEach(selectedCategory => {\n            selectedCategory.classList.remove('selected');\n          });\n        categoryElement.classList.add('selected');\n      }\n    });\n  });\n  seeMoreListener();\n}\nfunction renderHomeBooks(books) {\n  return books\n    .map(book => {\n      return `\n        <li class=\"home-books-item\" id=\"${book._id}\">\n            <div class=\"image-overlay\">\n                <img class=\"book-image\" src=\"${book.book_image}\" alt=\"${book.title}\">\n                <p class=\"image-overlay-text\">QUICK VIEW</p>\n            </div>\n            <div class=\"book-info\">\n                <p class=\"book-title break-text\">${book.title}</p>\n                <p class=\"book-author\">${book.author}</p>\n            </div>\n        </li>`;\n    })\n    .join('');\n}\nfunction seeMoreListener() {\n  for (let btns of seeMoreBtn) {\n    btns.addEventListener('click', () =>\n      LoadHomeCategory(btns.getAttribute('data-js'))\n    );\n  }\n}\n","import { refs } from './refs';\nimport { LoadHomeCategory } from '/js/homeCatRender.js';\nimport { loadHomeBooks } from './homeRender';\nimport { baseHomeTitle } from './homeCatRender';\n\nrefs.categoriesRef.addEventListener('click', categoriesSelected);\n\nexport function categoriesSelected(event) {\n  if (\n    !event ||\n    !event.target ||\n    !event.target.classList.contains('categories__item')\n  ) {\n    return;\n  }\n\n  const selectedCategory = event.target;\n\n  if (selectedCategory.dataset.category === 'all categories') {\n    const allCategories = Array.from(selectedCategory.parentElement.children);\n\n    allCategories.forEach(category => {\n      category.classList.remove('selected');\n    });\n\n    selectedCategory.classList.add('selected');\n\n    loadHomeBooks();\n    baseHomeTitle();\n  } else {\n    const allCategories = Array.from(selectedCategory.parentElement.children);\n\n    allCategories.forEach(category => {\n      category.classList.remove('selected');\n    });\n\n    selectedCategory.classList.add('selected');\n\n    LoadHomeCategory(selectedCategory.dataset.category);\n  }\n}\n\n// function addSelectedClass() {\n//   const buttons = document.querySelectorAll('.button.see-more');\n//   buttons.forEach(button => {\n//     button.addEventListener('click', () => {\n//       const category = button.dataset.js;\n//       const categoryElement = document.querySelector(\n//         `.categories__item[data-category=\"${category}\"]`\n//       );\n//       if (categoryElement) {\n//         const alreadySelected = categoryElement.classList.contains('selected');\n//         if (!alreadySelected) {\n//           categoryElement.classList.add('selected');\n//         }\n//       }\n//     });\n//   });\n// }\n\n// addSelectedClass();\n","/*LIBRARIES\n1. Axios\n(docs) - https://www.npmjs.com/package/axios?activeTab=readme\n2.izitoast\n(docs) - https://www.npmjs.com/package/izitoast\n3.tui-pagination\n(docs) - https://www.npmjs.com/package/tui-pagination\n4.Swiper \n(docs) - https://www.npmjs.com/package/swiper\n*/\nimport { loadHomeBooks } from './js/homeRender';\nloadHomeBooks();\n\nimport './js/support';\nimport './js/theme.js'\n\nimport { toggleModal } from './js/modalburger.js';  \n\nrefs.burgerBtn.addEventListener('click', () => {\nrefs.burgerCont.classList.toggle('is-open-burger');\nrefs.body.classList.toggle('modal-open-burger');\ntoggleModal();\n});\n\nif (localStorage.getItem('theme') === 'dark') {\n  refs.themeCheckbox.checked = true;\n  // Сюди треба навішати класи для темної теми або функцію яка це робитиме\n  document.body.classList.add('dark-theme');\n}\n/*-------------------CATEGORIES----------------------*/ \nimport { categoriesSelected } from './js/categories';\ncategoriesSelected();\n\nimport { refs } from './js/refs.js';\nimport { onAddThemeLocalStorage } from './js/localStorage.js';\nrefs.themeCheckbox.addEventListener('change', onAddThemeLocalStorage);\n\nimport { onBookClick, bookListRef } from './js/modalWindowFunctions.js';\nbookListRef.addEventListener('click', onBookClick);\n\n/*-----------------------SCROLL UP ----------------*/\nwindow.addEventListener('scroll', () => {\n  if (window.scrollY > 100) {\n    refs.upButton.style.display = 'block';\n  } else {\n     refs.upButton.style.display = 'none';\n  }\n});\n\n\nrefs.upButton.addEventListener('click', () => {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n});\n\n\n\n\n"],"names":["listForRender","sectionTitle","LoadHomeCategory","data","categoryTitle","fetchSelectedCategory","category","categoriesList","renderCategoryBooks","iziToast","error","listName","markupCategoryBooks","book","allCatBtn","currentSelected","listenAllCatBtn","titleArr","middleWord","forTitle","loadHomeBooks","baseHomeTitle","seeMoreBtn","loader","toastOptions","optionsIziToastError","fetchTopBooks","categories","renderHomeCategories","markupCategories","renderHomeBooks","button","categoryElement","selectedCategory","seeMoreListener","books","btns","refs","categoriesSelected","event","toggleModal","onAddThemeLocalStorage","bookListRef","onBookClick"],"mappings":"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"}