{"version":3,"file":"commonHelpers2.js","sources":["../src/js/pagination.js","../src/js/shoppingListRender.js","../src/shoping-list-main.js"],"sourcesContent":["import Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\n\nexport const PAGINATION = {\n  pagination: null,\n};\n\nconst paginationElem = document.querySelector('#pagination1');\n\nfunction initPagination() {\n  // console.log(window.screen.width);\n\n  if (window.screen.width < 768) {\n    options.itemsPerPage = 4;\n    options.visiblePages = 2;\n  }\n  PAGINATION.pagination = new Pagination('pagination1', options);\n  const data = JSON.parse(localStorage.getItem('modal'));\n  if (data.length < 3) {\n    paginationElem.style.display = 'none';\n  }\n  PAGINATION.pagination.setTotalItems(data.length);\n  PAGINATION.pagination.reset();\n}\n\nconst options = {\n  totalItems: 10,\n  itemsPerPage: 3,\n  visiblePages: 3,\n  page: 1,\n  centerAlign: false,\n  firstItemClassName: 'tui-first-child',\n  lastItemClassName: 'tui-last-child',\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n    currentPage:\n      '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n    moveButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</a>',\n    disabledMoveButton:\n      '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n      '</span>',\n    moreButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n      '<span class=\"tui-ico-ellip\">...</span>' +\n      '</a>',\n  },\n};\n\ninitPagination();\n\nexport function onPageChange(event, callback) {\n  const currentPage = event.page - 1;\n  const data = JSON.parse(localStorage.getItem('modal'));\n  const startIndex = currentPage * options.itemsPerPage;\n  const endIndex = startIndex + options.itemsPerPage;\n  const bookList = data.slice(startIndex, endIndex);\n  callback(bookList);\n}\n\nexport function updatePagination() {\n  const data = JSON.parse(localStorage.getItem('modal')) || [];\n  const currentPage = PAGINATION.pagination.getCurrentPage();\n  const maxPage = Math.ceil(data.length / options.itemsPerPage);\n  const page = currentPage > maxPage ? maxPage : currentPage;\n  PAGINATION.pagination.setTotalItems(data.length);\n  PAGINATION.pagination.reset();\n  PAGINATION.pagination.movePageTo(page);\n  if (data.length <= 3) {\n    paginationElem.classList.add('hidden');\n  } else {\n    paginationElem.classList.remove('hidden');\n  }\n}\nupdatePagination();\n","import { removeFromLocalStorage } from './localStorage.js';\nimport { getAllBooks } from './localStorage.js';\nimport amazonLogo from '../img/amazon.png';\nimport appleLogo from '../img/book.png';\nimport {} from '../js/refs.js';\nimport icon from '/img/noptimizesprite.svg';\nimport { updatePagination, PAGINATION, onPageChange } from './pagination.js';\n\nconst shoppingListRef = document.querySelector('#shopping-list');\nconst emptyShopListRef = document.querySelector('.box-bookslist');\n\ncheckLocalStorage();\n\nfunction checkLocalStorage() {\n  if (getAllBooks().length) {\n    emptyShopListRef.classList.add('emptyShoppingList');\n  } else emptyShopListRef.classList.remove('emptyShoppingList');\n}\n\nexport function renderShoppingList(books) {\n  const allBooksMarkup = (books || getAllBooks())\n    .map(bookElem => markupShoppingList(bookElem))\n    .join('');\n  shoppingListRef.innerHTML = allBooksMarkup;\n  const bloom = document.querySelector('#shopping-list');\n  bloom.addEventListener('click', deleteFromShoppingList);\n}\n\nfunction deleteFromShoppingList(event) {\n  if (!event.target.hasAttribute('id') === 'icon-deleteBtn') return;\n  removeFromLocalStorage(event);\n  checkLocalStorage();\n  updatePagination();\n}\n\nfunction markupShoppingList(book) {\n  return `<li class=\"shopping-list-item\">\n    <button type=\"button\" class=\"icon-deleteBtn\" data-id=\"${book._id}\">\n      <svg class=\"icon-trash\" id=\"icon-trash-03\" width=\"28\" height=\"28\">\n        <use href=\"${icon}#icon-trash-03\"></use>\n      </svg>\n    </button>\n      <img src=\"${book.book_image}\" alt=\"${book.title}\" class=\"shopping-item-img\">\n      \n    \n    <div class=\"book-info-wrap\">\n      <p class=\"shopping-book-title break-text\">${book.title}</p>\n      <p class=\"shopping-book-category break-text\">${book.list_name}</p>\n      <p class=\"book-alt-text\">${book.description}</p>\n      <div class=\"author-shops-wrap\">\n        <p class=\"book-author\">${book.author}</p>\n        <div class=\"img-wrap shopping-img-wrap\">\n          <a href=\"${book.amazon_product_url}\" target=\"blank\">\n            <img src=\"${amazonLogo}\" alt=\"amazon-logo\" class=\"amazon-logo shopping-amazon-logo\" width=\"32\" height=\"11\">\n          </a>\n          <a href=\"${book.buy_links[1].url}\" target=\"_blank\">\n            <img src=\"${appleLogo}\" alt=\"apple-book\" class=\"apple-logo shopping-apple-logo\" width=\"16\" height=\"16\">\n          </a>\n        </div>\n      </div>\n    </div>\n  </li>`;\n}\nwindow.addEventListener('resize', function () {\n  addDisplayPropertyToSupportClass();\n});\n\nfunction addDisplayPropertyToSupportClass() {\n  const screenWidth =\n    window.innerWidth ||\n    document.documentElement.clientWidth ||\n    document.body.clientWidth;\n  const supportElement = document.querySelector('.support');\n\n  if (screenWidth > 1279 && supportElement) {\n    supportElement.style.display = 'block';\n  } else {\n    supportElement.style.display = 'none';\n  }\n}\n\nPAGINATION.pagination.on('afterMove', event => {\n  onPageChange(event, renderShoppingList);\n});\nPAGINATION.pagination.movePageTo(1);\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const currentPath = window.location.pathname;\n  const shopLink = document.querySelector('.header-nav-shop');\n\n  if (currentPath.includes('shopinglist.html')) {\n    shopLink.classList.add('is-active');\n  }\n});\n","import './js/shoppingListRender';\nimport './js/support';\nimport './js/pagination';\nimport './js/theme.js';\n\nimport './img/noptimizesprite.svg';\n\nimport { refs } from './js/refs';\nimport { onAddThemeLocalStorage } from './js/localStorage';\nimport { toggleModal } from './js/modalburger.js';\n\n// Темна тема\nif (localStorage.getItem('theme') === 'dark') {\n  refs.themeCheckbox.checked = true;\n  document.body.classList.add('dark-theme');\n}\n\nrefs.themeCheckbox.addEventListener('change', onAddThemeLocalStorage);\n\n// Бургер меню\n\nrefs.burgerBtn.addEventListener('click', () => {\n  refs.burgerCont.classList.toggle('is-open-burger');\n  refs.body.classList.toggle('modal-open-burger');\n  toggleModal();\n});\n"],"names":["PAGINATION","paginationElem","initPagination","options","Pagination","data","onPageChange","event","callback","currentPage","startIndex","endIndex","bookList","updatePagination","maxPage","page","shoppingListRef","emptyShopListRef","checkLocalStorage","getAllBooks","renderShoppingList","books","allBooksMarkup","bookElem","markupShoppingList","deleteFromShoppingList","removeFromLocalStorage","book","icon","amazonLogo","appleLogo","addDisplayPropertyToSupportClass","screenWidth","supportElement","currentPath","shopLink","refs","onAddThemeLocalStorage","toggleModal"],"mappings":"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"}